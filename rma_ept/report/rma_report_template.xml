<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="custom_external_layout_rma">
        <style>
         td.header{border: 1px solid #66a035;padding-right:10px;padding-left:10px;
                    }
                    td.color{background-color:#66a035;color:white;
                    }
                    span.bottom-div{
                    display: flex;
                    justify-content: flex-end;
                    align-items: flex-end;
                    }
    </style>
        <div class="header">
            <div class="row">
                <div class="col-3 mb4">
                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height: 45px;" alt="Logo"/>
                </div>

<!--                <t t-if="company.report_header">-->
<!--                    <div class="col-4 text-right" style="margin-top:22px;" t-field="company.report_header" name="moto"/>-->
<!--                     <t t-foreach="docs" t-as="doc">-->
<!--                     <div class="col-5">-->

<!--                                    <table class=" table table-sm" style="border-collapse:collapse">-->
<!--                                    <tr style="text-align:center;">-->
<!--                                        <td style="border: 1px solid #66a035">-->
<!--                                            <span style="font-size:18px;width:50%">Factura</span>-->
<!--                                        </td>-->
<!--                                        <td style="width:50%;font-size:18px;color:white;background-color:#66a035;border: 1px solid #66a035">-->
<!--                                            <span t-field="doc.name"/>-->
<!--                                        </td>-->
<!--                                    </tr>-->
<!--                                </table>-->

<!--                            </div>-->
<!--                            </t>-->
<!--                    </t>-->
<!--                <t t-else="">-->
<!--                     <t t-foreach="docs" t-as="doc">-->
<!--                         <div class="col-4"/>-->
<!--                     <div class="col-5">-->
<!--                                <table class=" table table-sm" style="border-collapse:collapse">-->
<!--                                    <tr style="text-align:center;">-->
<!--                                        <td style="border: 1px solid #66a035;width:50%">-->
<!--                                            <span style="font-size:18px">Factura</span>-->
<!--                                        </td>-->
<!--                                        <td style="font-size:18px;color:white;background-color:#66a035;border: 1px solid #66a035;width:50%">-->
<!--                                            <span t-field="doc.name"/>-->
<!--                                        </td>-->
<!--                                    </tr>-->
<!--                                </table>-->
<!--                            </div>-->
<!--                            </t>-->
<!--                </t>-->

            </div>


        </div>

        <div class="article o_report_layout_standard" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
            <t t-call="web.address_layout"/>
            <t t-raw="0"/>
        </div>

        <div class="footer o_standard_footer" style="font-size:80%">
            <div class="text-center">
                <div class="row">
                    <div class="col-4">
                        <span t-if="company.email">
                            <span t-field="company.email"/>
                        </span>
                        <br/>
                        <span t-if="company.website">
                            <span t-field="company.website" style="color:#66a035"/>
                        </span>
                    </div>
                  <div class="col-4">
                        <div style=" position: absolute;bottom: 0px;padding-left:25%;text-align:center">
                            <center>
                                <t t-if="company.phone">
                                    <div style="min-height: 70%;height: 70%;"></div>
                                    <div style="min-height: 20%;height: 20%;">
                                        <span t-field="company.phone"/>
                                    </div>
                                </t>
                            </center>
                        </div>
                    </div>


                    <div class="col-4" name="company_address">

                        <span t-if="company.partner_id.street" t-esc="company.partner_id.street + ','"/>
                        <span t-if="company.partner_id.l10n_mx_edi_colony" t-esc="company.partner_id.l10n_mx_edi_colony+ ','"/>
                        <span t-if="company.partner_id.city" t-esc="company.partner_id.city + ','"/>
                        <span t-if="company.partner_id.state_id.name" t-esc="company.partner_id.state_id.name + ','"/>
                        <span t-if="company.partner_id.country_id.name" t-esc="company.partner_id.country_id.name"/>
                    </div>
                </div>


                <div name="financial_infos">
                    <span t-field="company.report_footer"/>
                </div>
                <div t-if="report_type == 'pdf'" class="text-muted">
                    Page:
                    <span class="page"/>
                    /
                    <span class="topage"/>
                </div>
            </div>
        </div>
    </template>

    <template id="external_layout_rma">

        <t t-if="not o" t-set="o" t-value="doc"/>

        <t t-if="not company">
            <!-- Multicompany -->
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>

        <t t-call="rma_ept.custom_external_layout_rma">
            <t t-raw="0"/>
        </t>


    </template>
    <template id="report_rma_document">
        <t t-call="rma_ept.external_layout_rma">
            <t t-set="doc" t-value="doc.with_context({'lang':doc.partner_id.lang})"/>
            <div class="page">
                <style>
          table,tr,td{
          border: 2px solid #dbdbdb;
          }
      </style>
                <table class="table" stlye="border:1px solid black;">
                    <tr>
                        <td style="background-color:#dbdbdb;  width: 50%">
                            <b>REPORTE DE ANALISIS DE FALLAS</b>
                        </td>
                        <td>
                            <b>Número de RMA:</b> <span t-field="doc.code"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Cliente:</b> <span t-field="doc.partner_id"/>
                        </td>
                        <td>
                            <b>Escrito por:</b> <span t-field="doc.write_by_report"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Fecha:</b> <span t-field="doc.date"/>
                        </td>
                        <td>
                            <b>Aprobado por:</b> <span t-field="doc.approved_by"/>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="2">
                            <b>Cliente Reporta:</b> <span t-field="doc.name"/>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <b>Evaluación:</b> <br/> <span align="justify" t-field="doc.description"/>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <b>Análisis:</b> <br/>
                            <span t-field="doc.resolution"/>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <b>Causa Raíz de Problema:</b>
                            <p><span align="justify" t-field="doc.cause"/></p>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <b>Procede Garantía:</b>
                            <p><span align="justify"/></p>
                            <t t-if="doc.state in ['reject']">
                                No
                            </t>
                            <t t-if="doc.state in ['approve','process','close']">
                                Si
                            </t>
                            <t t-if="doc.state in ['draft']">
                                En Espera de Validacion
                            </t>


                        </td>
                    </tr>
                </table>
        </div>
        </t>
    </template>
    <template id="report_rma">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="rma_ept.report_rma_document" t-lang="doc.partner_id.lang"/>
            </t>
        </t>
    </template>
</odoo>